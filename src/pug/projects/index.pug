//-Шаблон страницы
extends ../_templates/general

block prepend title
	- var pageTitle = "Проекты"
	| #{pageTitle + " → "}


block page-title
	| #{pageTitle}

block content
	//- var projectList = {"Этапы": "/", "Термины":"/terms.html", "Методологии":"/methodologies.html"}

	//- Цикл, который выводит пункты меню.
	//- Если значение переменной "menu_link_selected" совпадает с названием страницы, то присвоить класс "active"
		each val, key in projectList
			if menu_link_active === key
				li.menu__item
					a(href=val, class="menu__lnk active menu__lnk--" + key.toLowerCase())
						span.menu__lnk__inr= key
			else
				li.menu__item
					a(href=val, class="menu__lnk menu__lnk--" + key.toLowerCase())
						span.menu__lnk__inr= key

	mixin projectCard($projectPriority, $width)
		each val in projectList
			if val.priority === $projectPriority
				div(class="project-card", class={"--not-filled-in-yet": val.type === "unpublished"}, class="col--xs-"+$width)

					//- Подставляется после case
					mixin _projectList-content
						.project-card__thumbnail
							//- todo img(src='/projects/'+ $projectID + '/preview.png', alt='')
							img(src='/projects/1/preview.png', alt='')
						.project-card__caption-wrapper
							.project-card__caption(class={"--external": val.type === "external"})
								.project-card__title= val.name
								.project-card__desc= val.desc
								span.project-card__date= val.date
								if val.published === false
									.project-card__not-available-message В процессе наполнения


					case val.type
						when "internal"
							a.project-card__link(href='/projects/' + val.id + '/')
								+_projectList-content
						when "external"
							a.project-card__link(href=val.targetURL, target='_blank', rel="nofollow noopener noreferrer")
								+_projectList-content
						when "unpublished"
							+_projectList-content



	.row.project-list
		+projectCard($projectPriority="1", $width="6")
	h2 Собственное бюро и фриланс
	.row.project-list
		+projectCard($projectPriority="2", $width="6")
	.row.project-list
		+projectCard($projectPriority="3", $width="4")